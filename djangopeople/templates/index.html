{% extends base_template %}
{% load misc_extras django_static thumbnail %}

{% block nav_li_class_home %} class="current"{% endblock %}>

{% block extracss %}
<style type="text/css">
{% slimcontent %}
#promo-text {
	display: block;
	width: 500px;
	height: auto;
	float: left;
}

p.promo-title {
	margin: 0px 0 20px 20px;
	width: 600px;
	font-size: 3em;
	font-weight: bold;
	color: #a10606;
	padding-bottom: 0px;
}
a.promo-link {
	font-size: 1.5em;
	margin-left: 40px;
	text-decoration: underline;
}

p.promo {
	margin-left: 30px;
	padding: 0px 30px 0px 0px;
	width: 470px;
	font-family: Helvetica, sans-serif;
	font-size: 14px;
	color: #666;
}

{% endslimcontent %}
</style>
{% endblock %}

{% block js %}
<script type="text/javascript">
{# This javascript variable is going to be used in index.js #}
{% slimcontent %}
var people = [
    // latitude, longitude, name, username, location description
    {% for person in recent_people %}
      {{ person|nearby_people_escape|safe }}{% if not forloop.last %},{% endif %}
    {% endfor %}
];
{% endslimcontent %}
</script>
<script type="text/javascript" src="{% slimfile "/js/worldmap.js" %}"></script>

{% endblock %}
	
	{% block signup %}

	<div id="signup">
	<p><strong>A world-wide map of {{ PROJECT_NAME }}! <a href="/signup/">Signup today.</a></strong></p>
	</div>
	{% endblock %}

{% block count %}<p>The worldwide community of martial artists</p> {% endblock %}

{% block map %}

	<div class="mapContainer major">
        		<div id="gmap">&nbsp;</div>
	</div>

	<div class="counter-current">
	<div class="number">{{ people_count }}</div> new people added!<br />
	{% if not user.is_authenticated %}<a href="signup">Add yourself now!</a>
	{% else %}
	<a href="{% url wall %}">See everyone!</a>		
	{% endif %}
	</div>
	<div class="counter">
	<div class="number"></div><strong>ZOOM!</strong> Find clubs, styles and people<br>
	<a href="zoom">Try it out now.</a>
	</div>
{% endblock %}

{% block content %}
<div class="wrapper">

	            {% if not user.is_authenticated %}
	<div id="promo-text">
	<p class="promo-title">Calling all kung fu people!</p>
	<p class="promo">If you do kung fu, then we need your help! We're creating a massive global map of every martial artist and club around the globe, and we want you to stand up, be counted and say "I'm a proud kung fu person!"</p>

	<p><a class="promo-link" href="{% url signup %}">I do kung fu - add me to the map now!</a></p>
	<p><a class="promo-link" href="/about/">I'm interested...tell me more</a></p>

	</div>


	<br style="clear:both">

		{% endif %}



	<div id="highlight">
		<div class="highlight-home">
		<h3>Styles recently added</h3>
		{% for style in styles %}
		    <a href="{{ style.get_absolute_url }}">{{ style.name }}</a>{% if not forloop.last %}<br>{% endif %}
		{% endfor %}
		</div>

		<div class="highlight-home">
		<h3>Clubs recently added</h3>
		{% for club in clubs %}
		    <span style="font-size: {{ club.get_members.count }}px;"><a href="{{ club.get_absolute_url }}">{{ club.name }}</a>{% if not forloop.last %}<br>{% endif %}</span>
		{% endfor %}
		</div>

		<div class="highlight-home-people">
		<h3>People recently added</h3>

			<div class="horizontal-photos">
			{% for person in recent_people_limited %}
        	        <a href="{{ person.get_absolute_url }}" 
        	           title="Click to see {{ person.user.first_name }}'s profile">
        	        <img src="{% if person.photo %}{% thumbnail person.photo 40x40 crop %}{% else %}{% staticfile "/img/upload-a-photo-40.png" %}{% endif %}" alt="{{ person }}">
			</a>
        		{% endfor %}
			</div>
			<br clear="all"/>
			<div class="horizontal-image-list-text">
		  (located in:  {% for person in recent_people|uniqify_on:"country" %}<a href="/{{ person.country.iso_code|lower }}/">{{ person.country }}</a>{% if not forloop.last %}, {% endif %}
		  {% endfor %})
			</div>
		</div>
	</div>


		

	</div>



{% endblock %}
