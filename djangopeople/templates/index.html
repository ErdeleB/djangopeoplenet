{% extends "base.html" %}

{% block nav_li_class_home %} class="current"{% endblock %}>

{% block js %}{% load thumbnail %}
<script src="http://www.google.com/jsapi?key={{ api_key }}" type="text/javascript">
</script>
<script type="text/javascript">
google.load('maps', '2');

var people = [
    // latitude, longitude, name, username, location description
    {% for person in recent_people %}
    [{{ person.latitude }}, {{ person.longitude }}, "{{ person|escapejs }}", "{{ person.user.username|escapejs }}", "{{ person.location_description|escapejs }}", "{% if person.photo %}{% thumbnail person.photo 40x40 crop %}{% else %}/static/img/person_small_blank.png{% endif %}", "{{ person.country.iso_code|lower }}"]{% if not forloop.last %},{% endif %}
    {% endfor %}
];

window.onload = function() {
    window.gmap = new google.maps.Map2(document.getElementById('gmap'));
    gmap.addControl(new google.maps.LargeMapControl());
    gmap.addControl(new google.maps.MapTypeControl());
    
//    gmap.setCenter(new google.maps.LatLng(43.834526782236814, -37.265625), 2);
    gmap.setCenter(new google.maps.LatLng(19.97335, -15.8203), 2);
    // Plot the people as markers
    $.each(people, function() {
        var lat = this[0];
        var lon = this[1];
        var name = this[2];
        var username = this[3];
        var location_description = this[4];
        var photo = this[5];
        var iso_code = this[6];
        var point = new google.maps.LatLng(lat, lon);
        var marker = new google.maps.Marker(point, getMarkerOpts());
        gmap.addOverlay(marker);
        // Hook up the marker click event
        google.maps.Event.addListener(marker, 'click', function() {
            marker.openInfoWindow(makeWindow(
                name, username, location_description, photo, iso_code, 
                lat, lon
            ));
        });
    });
};
</script>

{% endblock %}

{% block count %}<p>The worldwide community of martial artists</p> {% endblock %}

{% block map %}
    <div class="mapContainer major">
        <div id="gmap">&nbsp;</div>
    </div>
{% endblock %}

{% block content %}

	<div class="intro-box">
		<h3>What is kungfu people?</h3>
		<p>Kungfu People lets martial artists place themselves on the global martial arts map. Create your profile, and find other fellow enthusiasts in your area.</p>
	</div>


	<div id="home-content-box">
		<div id="inside-left">
		<h3>What's new today?</h3>
		<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

		<p class="mapnote">ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
	    
	    
		</div>
		
		<div id="inside-right">
			<h3>Latest members</h3>
				<ul class="latest-list">
			        	{% for person in recent_people %}
        	    			<li class="latest-list">
        	        		{% if person.photo %}<img src="{% thumbnail person.photo 40x40 crop %}" alt="{{ person }}" class="latest">{% else %}<img src="/static/img/upload-a-photo-40.png" alt="blank" class="latest">{% endif %}
 			       	        <a href="{{ person.get_absolute_url }}">{{ person.user.get_full_name }}</a> ({{ person.country.iso_code }})
        	        		<p class="meta"><a href="/{{ person.country.iso_code|lower }}/" class="nobg"></a> {{ person.style }}</p>
                
 					</li>
        				{% endfor %}
				</ul>

		</div>



	</div>


	<div class="intro-box">
		<strong>What is kung fu?</strong>
<p><span class="large-text">&ldquo;</span>{{ definition.what_is_kungfu }}<span class="large-text">&rdquo;</span>  <span class="small-text">(says <a href="/{{ definition.user }}/">{{ definition.user.get_full_name }}</a>)</span></p>
	
	</div>

	<div class="intro-box">
		<h3>Most popular styles</h3>
<p><strong>White Cranes:</strong> {{ styles }}</p>
	
	</div>

	<div class="intro-box">
		<h3>Find a club in your area</h3>
<p>If you're thinking about starting kung fu, this website can help you find a good club in your area.</p>
	
	</div>

{% endblock %}
